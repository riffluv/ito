<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€ä¿å­˜ç‰ˆã€‘ãƒãƒ­ã‚¦ã‚£ãƒ³å¤œæ™¯ - Pixi.js</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0a0a0a;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        #gameCanvas {
            display: block;
            cursor: pointer;
        }

        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 100;
        }

        .controls h3 {
            margin: 0 0 10px 0;
            color: #ff9500;
        }

        .controls p {
            margin: 5px 0;
        }

        .backup-notice {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #fff;
            background: rgba(255, 149, 0, 0.8);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 100;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="controls">
        <h3>ğŸŒ™ ãƒãƒ­ã‚¦ã‚£ãƒ³å¤œæ™¯</h3>
        <p>ã‚¯ãƒªãƒƒã‚¯: æµã‚Œæ˜Ÿã‚’ç™ºå°„</p>
        <p>ãƒã‚¦ã‚¹ç§»å‹•: è¦–å·®åŠ¹æœ</p>
        <p>è‡ªå‹•: é›²ã¨éœ§ã®æµã‚Œ</p>
    </div>

    <div class="backup-notice">
        ğŸ’¾ ã‚ªãƒªã‚¸ãƒŠãƒ«ä¿å­˜ç‰ˆ
    </div>

    <canvas id="gameCanvas"></canvas>

    <!-- Pixi.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.2/pixi.min.js"></script>

    <script>
        // Pixi.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–
        const app = new PIXI.Application({
            view: document.getElementById('gameCanvas'),
            width: window.innerWidth,
            height: window.innerHeight,
            backgroundColor: 0x0a0a0a,
            antialias: true
        });

        // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
        function resize() {
            app.renderer.resize(window.innerWidth, window.innerHeight);
        }
        window.addEventListener('resize', resize);

        // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
        const scene = new PIXI.Container();
        app.stage.addChild(scene);

        // å¤œç©ºã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯
        function createNightSky() {
            const graphics = new PIXI.Graphics();

            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é¢¨ã®å¤œç©º
            const gradient = [
                { color: 0x0a0a0a, position: 0 },      // æ·±ã„é»’
                { color: 0x1a1a3a, position: 0.3 },    // æ·±ã„ç´º
                { color: 0x2a2a5a, position: 0.6 },    // ç´ºè‰²
                { color: 0x3a3a7a, position: 1 }       // è–„ã„ç´º
            ];

            for (let i = 0; i < gradient.length - 1; i++) {
                const startColor = gradient[i].color;
                const endColor = gradient[i + 1].color;
                const startY = app.screen.height * gradient[i].position;
                const endY = app.screen.height * gradient[i + 1].position;

                graphics.beginFill(startColor);
                graphics.drawRect(0, startY, app.screen.width, endY - startY);
                graphics.endFill();
            }

            return graphics;
        }

        // æ˜Ÿã‚’ç”Ÿæˆ
        function createStars() {
            const starContainer = new PIXI.Container();

            for (let i = 0; i < 200; i++) {
                const star = new PIXI.Graphics();
                const size = Math.random() * 2 + 0.5;
                const brightness = Math.random() * 0.8 + 0.2;

                star.beginFill(0xffffff);
                star.drawCircle(0, 0, size);
                star.endFill();

                star.x = Math.random() * app.screen.width;
                star.y = Math.random() * app.screen.height * 0.6; // ä¸ŠåŠåˆ†ã®ã¿
                star.alpha = brightness;

                // ãã‚‰ã‚ãåŠ¹æœ
                star.twinkle = Math.random() * Math.PI * 2;
                star.twinkleSpeed = Math.random() * 0.05 + 0.01;

                starContainer.addChild(star);
            }

            return starContainer;
        }

        // æœˆã‚’ç”Ÿæˆ
        function createMoon() {
            const moonContainer = new PIXI.Container();

            // æœˆæœ¬ä½“
            const moon = new PIXI.Graphics();
            moon.beginFill(0xfff8dc);
            moon.drawCircle(0, 0, 60);
            moon.endFill();

            // æœˆã®æ¨¡æ§˜ï¼ˆã‚¯ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰
            const craters = new PIXI.Graphics();
            craters.beginFill(0xe6e6e6);
            craters.drawCircle(-20, -10, 8);
            craters.drawCircle(15, 5, 12);
            craters.drawCircle(-5, 20, 6);
            craters.drawCircle(25, -15, 4);
            craters.endFill();

            // æœˆã®å…‰è¼ª
            const glow = new PIXI.Graphics();
            glow.beginFill(0xfff8dc, 0.1);
            glow.drawCircle(0, 0, 100);
            glow.endFill();

            moonContainer.addChild(glow);
            moonContainer.addChild(moon);
            moonContainer.addChild(craters);

            moonContainer.x = app.screen.width * 0.8;
            moonContainer.y = app.screen.height * 0.2;

            return moonContainer;
        }

        // é›²ã‚’ç”Ÿæˆ
        function createClouds() {
            const cloudContainer = new PIXI.Container();

            for (let i = 0; i < 8; i++) {
                const cloud = new PIXI.Graphics();
                cloud.beginFill(0x2a2a4a, 0.4);

                // ä¸è¦å‰‡ãªé›²ã®å½¢
                const cloudParts = Math.floor(Math.random() * 3) + 3;
                for (let j = 0; j < cloudParts; j++) {
                    const radius = Math.random() * 30 + 20;
                    const x = j * 25 + Math.random() * 20 - 10;
                    const y = Math.random() * 20 - 10;
                    cloud.drawCircle(x, y, radius);
                }
                cloud.endFill();

                cloud.x = Math.random() * (app.screen.width + 200) - 100;
                cloud.y = Math.random() * app.screen.height * 0.5;
                cloud.speed = Math.random() * 0.5 + 0.1;

                cloudContainer.addChild(cloud);
            }

            return cloudContainer;
        }

        // æµã‚Œæ˜Ÿã‚¯ãƒ©ã‚¹
        class ShootingStar {
            constructor(startX, startY, targetX, targetY) {
                this.container = new PIXI.Container();

                // æµã‚Œæ˜Ÿã®è»Œè·¡
                this.trail = new PIXI.Graphics();
                this.star = new PIXI.Graphics();

                // æ˜Ÿæœ¬ä½“
                this.star.beginFill(0xffffff);
                this.star.drawCircle(0, 0, 3);
                this.star.endFill();

                this.container.addChild(this.trail);
                this.container.addChild(this.star);

                this.startX = startX;
                this.startY = startY;
                this.targetX = targetX;
                this.targetY = targetY;
                this.progress = 0;
                this.speed = 0.02;
                this.trailPoints = [];

                scene.addChild(this.container);
            }

            update() {
                this.progress += this.speed;

                if (this.progress >= 1) {
                    scene.removeChild(this.container);
                    return false;
                }

                // ç¾åœ¨ä½ç½®ã‚’è¨ˆç®—
                const currentX = this.startX + (this.targetX - this.startX) * this.progress;
                const currentY = this.startY + (this.targetY - this.startY) * this.progress;

                this.container.x = currentX;
                this.container.y = currentY;

                // è»Œè·¡ã‚’æ›´æ–°
                this.trailPoints.push({ x: 0, y: 0 });
                if (this.trailPoints.length > 10) {
                    this.trailPoints.shift();
                }

                // è»Œè·¡ã‚’æç”»
                this.trail.clear();
                this.trail.lineStyle(2, 0xffffff, 0.8);
                for (let i = 0; i < this.trailPoints.length; i++) {
                    const alpha = (i + 1) / this.trailPoints.length * 0.8;
                    this.trail.lineStyle(2, 0xffffff, alpha);

                    if (i === 0) {
                        this.trail.moveTo(
                            this.trailPoints[i].x - (i + 1) * 5,
                            this.trailPoints[i].y - (i + 1) * 3
                        );
                    } else {
                        this.trail.lineTo(
                            this.trailPoints[i].x - (i + 1) * 5,
                            this.trailPoints[i].y - (i + 1) * 3
                        );
                    }
                }

                return true;
            }
        }

        // ã‚·ãƒ¼ãƒ³ã®æ§‹ç¯‰
        const nightSky = createNightSky();
        const stars = createStars();
        const moon = createMoon();
        const clouds = createClouds();

        scene.addChild(nightSky);
        scene.addChild(stars);
        scene.addChild(moon);
        scene.addChild(clouds);

        // æµã‚Œæ˜Ÿã®é…åˆ—
        const shootingStars = [];

        // ãƒã‚¦ã‚¹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
        let mouseX = 0;
        let mouseY = 0;

        app.view.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        app.view.addEventListener('click', (e) => {
            // æµã‚Œæ˜Ÿã‚’ç”Ÿæˆ
            const startX = Math.random() * app.screen.width;
            const startY = Math.random() * app.screen.height * 0.3;
            const shootingStar = new ShootingStar(startX, startY, e.clientX, e.clientY);
            shootingStars.push(shootingStar);
        });

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—
        app.ticker.add(() => {
            const time = Date.now() * 0.001;

            // æ˜Ÿã®ãã‚‰ã‚ã
            stars.children.forEach(star => {
                star.alpha = 0.3 + Math.sin(time * star.twinkleSpeed + star.twinkle) * 0.3;
            });

            // é›²ã®ç§»å‹•
            clouds.children.forEach(cloud => {
                cloud.x += cloud.speed;
                if (cloud.x > app.screen.width + 100) {
                    cloud.x = -200;
                }
            });

            // æœˆã®å¾®å¦™ãªæºã‚‰ã
            moon.y = app.screen.height * 0.2 + Math.sin(time * 0.5) * 3;

            // è¦–å·®åŠ¹æœï¼ˆãƒã‚¦ã‚¹è¿½å¾“ï¼‰
            const parallaxStrength = 0.02;
            const centerX = app.screen.width / 2;
            const centerY = app.screen.height / 2;

            stars.x = (centerX - mouseX) * parallaxStrength;
            stars.y = (centerY - mouseY) * parallaxStrength * 0.5;

            clouds.x = (centerX - mouseX) * parallaxStrength * 0.5;
            clouds.y = (centerY - mouseY) * parallaxStrength * 0.3;

            moon.x = app.screen.width * 0.8 + (centerX - mouseX) * parallaxStrength * 0.3;

            // æµã‚Œæ˜Ÿã®æ›´æ–°
            for (let i = shootingStars.length - 1; i >= 0; i--) {
                if (!shootingStars[i].update()) {
                    shootingStars.splice(i, 1);
                }
            }

            // è‡ªå‹•æµã‚Œæ˜Ÿï¼ˆãƒ©ãƒ³ãƒ€ãƒ ï¼‰
            if (Math.random() < 0.003) {
                const startX = Math.random() * app.screen.width;
                const startY = Math.random() * app.screen.height * 0.3;
                const targetX = Math.random() * app.screen.width;
                const targetY = Math.random() * app.screen.height * 0.7 + app.screen.height * 0.3;
                const shootingStar = new ShootingStar(startX, startY, targetX, targetY);
                shootingStars.push(shootingStar);
            }
        });

        console.log('ğŸŒ™ ã€ä¿å­˜ç‰ˆã€‘ãƒãƒ­ã‚¦ã‚£ãƒ³å¤œæ™¯ã‚·ãƒ¼ãƒ³èµ·å‹•å®Œäº†ï¼');
    </script>
</body>
</html>