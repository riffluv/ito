# 🎯 Claude Code 指示書

## 📋 **プロジェクト概要**

**Online ITO - ドラクエ風数字カードゲーム**

このプロジェクトは**完成・デプロイ済み**のオンラインマルチプレイヤーカードゲームです。
- **公開URL**: https://numberlink.vercel.app/
- **技術スタック**: Next.js 14 + Firebase Firestore + Vercel
- **デザインテーマ**: ドラゴンクエスト風レトロゲームUI
- **プレイ人数**: 2-6人のリアルタイム対戦


## 📚 **主要ドキュメント**

### **最優先参照ファイル**

- **`CLAUDE.md`** ← この指示書（現在のファイル）
- **`docs/GAME_LOGIC_OVERVIEW.md`** ← ゲーム仕様・ロジック詳細
- **`claudedocs/vercel-firebase-setup.md`** ← デプロイ・環境設定手順
- **`AIdesign/`** ← AIデザイン分析・UI/UX特徴資料

### **完成済み主要機能**

✅ **リアルタイム対戦システム** - Firebase Firestoreによる同期  
✅ **ドラクエ風UI統一** - 全コンポーネントでデザイン統一完了  
✅ **GSAP アニメーション** - 成功/失敗演出、フェーズ遷移  
✅ **チャット機能** - ドラクエ風一行チャット  
✅ **レスポンシブ対応** - PC・スマホ・タブレット対応  
✅ **Vercel本番デプロイ** - 環境変数設定・Firebase連携完了


## 🚨 **重要: テーマシステム決定事項**

### **ダークモード固定決定**

**2025-09-01に変更**: このプロジェクトは**ダークモード専用**に確定しました。

#### **重要な決定理由**
- 黒ベースのデザインでゲーム画面が引き締まって見える
- 長時間プレイでも目に優しい
- 保守性の向上（テーマ切り替えロジック除去）
- 今後のエージェント作業での一貫性確保

#### **⚠️ 将来のエージェント向け重要警告**

**絶対に以下を行わないでください:**

1. **`_light` プロパティの再導入**
   - すべて除去済み。再追加は UI 破綻を引き起こします
   - `theme/index.ts`, `theme/recipes/*.ts` から完全除去済み

2. **ライトモード機能の復活**
   - `next-themes` プロバイダーは意図的に除去済み
   - `ThemeToggle` コンポーネントは無効化済み

3. **条件付きテーマトークンの使用**
   ```typescript
   // ❌ 絶対に使用禁止
   bg: { base: "gray.900", _light: "white" }
   
   // ✅ 正しい形式（ダークモード固定）
   bg: "gray.900"
   ```

#### **現在の実装状態**
- ✅ `theme/semantic/colors.ts`: 全semantic tokensでダークモード専用色を定義
- ✅ `theme/recipes/button.recipe.ts`: 全variantでダークモード専用
- ✅ `components/site/Hero.tsx`: bgGradientダークモード固定  
- ✅ `components/site/LobbySkeletons.tsx`: skeleton colorダークモード固定
- ✅ `app/providers.tsx`: DarkModeOnlyBridge実装
- ✅ `components/site/ThemeToggle.tsx`: 機能無効化済み

#### **質問時の対応**
もしユーザーからライトモード関連の要求があった場合:

1. この決定事項セクションを参照
2. ダークモード固定の理由を説明  
3. UI破綻リスクを警告
4. 代替提案（コントラスト調整など）を提示

**この決定は最終確定です。変更には十分な理由が必要です。**

## 🎮 **ゲームの特徴**

### **ドラゴンクエスト風デザイン統一**
- **リッチブラック背景** (`rgba(8,9,15,0.9)`)
- **太い白枠** (`3px solid rgba(255,255,255,0.9)`)
- **角ばったデザイン** (`borderRadius: 0`)
- **monospaceフォント** + **textShadow**
- **立体感のあるboxShadow**

### **プレイフロー**
1. **名前設定** → **ルーム作成/参加** 
2. **待機室** → **ゲーム開始** (ホスト操作)
3. **数字配布** → **お題表示** → **連想ワード入力**
4. **カード提出** → **並び替え** → **結果判定**
5. **GSAP演出** → **次ラウンドorゲーム終了**

### **技術的特徴**
- **Firestore** でリアルタイム同期
- **匿名認証** でシンプルログイン
- **GSAP** で高品質アニメーション
- **dnd-kit** でドラッグ&ドロップ
- **Chakra UI v3** でコンポーネント設計

## 🚀 **今後の開発について**

**このプロジェクトは完成・デプロイ済み**です。今後の作業は：
- 新機能追加・拡張
- UI/UX改善
- パフォーマンス最適化
- バグ修正・メンテナンス

**既存機能は十分にテスト済み**のため、破壊的変更は避けてください。

