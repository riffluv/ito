# 🎯 Claude Code 指示書

## 📋 **メイン ミッション**

**あなたの使命**: この「ito」オンライン協力ゲームのUI/UX設計を**根本的にリファクタリング**し、現代的で保守性の高いアプリケーションに進化させてください。

## 📚 **必読資料**

### **最優先参照ファイル**

- **`CLAUDE.md`** ← この指示書（現在のファイル）
- **`docs/itorule.md`** ← ゲームルール仕様（変更禁止）
- **`d`** ← この指示書（現在のファイル）

わからないことあればgpt5-searchをつかってね。

次の指示案（優先順位順）

1. レスポンシブ設計の改善（最優先）
   モバイルアクセシビリティの問題を解決してください：

現在の問題：

- `display={{ base: "none", md: "flex" }}` でモバイルでサイドバー・右パネルが完全非表示
- モバイルユーザーが参加者リストやチャットにアクセス不可

解決方針：

1. モバイル用ボトムシート実装
2. ハンバーガーメニューでサイドバーアクセス
3. スワイプ操作でチャットパネル表示
4. タブ切り替えでコンテンツ表示

技術制約：

- UNIFIED_LAYOUTシステム活用
- framer-motionでスムーズなアニメーション
- アクセシビリティ配慮（aria-label、focus管理）

2. minH={0}の最適化
   Flexboxレイアウトの根本的改善を実施してください：

現在の問題：

- 10箇所でminH={0}を使用（一時的回避策）
- Flexbox overflow問題の根本解決が必要

改善方針：

1. flex-shrink: 0 の適切な使用
2. overflow: hidden の戦略的配置
3. 高さ計算の明示的制御
4. minH={0}の段階的削除

目標：minH={0}使用箇所を5箇所以下に削減3. 廃止予定システムの移行
レガシーレイアウトシステムから新システムへの完全移行：

移行対象：

- UNIFIED_LAYOUT.BORDER_WIDTH (25箇所以上)
- PREDICTABLE_LAYOUT → UNIFIED_LAYOUT
- DPI_ADAPTIVE_LAYOUT → UNIFIED_LAYOUT

移行方針：

1. getBorderWidth() ヘルパー関数の活用
2. コンテキストアウェアなborder管理
3. elevation システムの積極活用
4. 段階的移行でリスク軽減
   💡 推奨する次の指示
   最優先は「レスポンシブ設計の改善」です。理由：

ユーザビリティに直接影響
モバイルユーザーのアクセシビリティ問題
ゲームの協力要素（チャット・参加者確認）が重要
Claude Codeに以下のように伝えることをお勧めします：

次のミッション：モバイルアクセシビリティの完全解決

現在モバイルユーザーがサイドバー・右パネルにアクセスできない問題を解決してください。ボトムシート、ハンバーガーメニュー、スワイプ操作を実装し、全デバイスで快適なゲーム体験を提供してください。

詳細指示をCLAUDE.mdに追記してもらえますか？
