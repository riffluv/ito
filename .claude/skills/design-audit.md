---
name: design-audit
description: 万能デザイン指示書に基づいてコードをチェックし、AI臭さを排除
---

# デザイン監査スキル

## 目的
変更されたコードが「万能デザイン指示書.md」の基準を満たしているか検証し、AI臭さを排除する。

## 実行手順

### 1. 参照ドキュメント読み込み
- `万能デザイン指示書.md` を必ず読む
- 特に Part 2 の「50項目チェックリスト」を重点確認

### 2. 変更ファイルの特定
- git diff または指定されたファイルを対象
- UI/スタイル関連のみをチェック対象とする

### 3. チェック項目 (優先度高のみ抜粋)

#### 🔴 **CRITICAL (必須)**
- [ ] 余白が4の倍数だけ → `19px`, `22px` など中途半端な値を使用
- [ ] 行間が全段落同じ → 見出し/本文/注釈で差をつける
- [ ] 角丸が全ボタン同じ → 主/副/危険で `3px/7px/10px` など差別化
- [ ] 影が全カード同一 → 面積×重要度で影の段差をつける
- [ ] アニメが `ease-in-out` 固定 → `cubic-bezier(.2,1,.3,1)` などカスタム
- [ ] フォーカスリング既定 → 配色/太さを文脈最適化
- [ ] CTA周りが密 → 周囲空白を広めに
- [ ] エラー色が派手過ぎ → 彩度/明度落とす
- [ ] 長文の最長行が広すぎ → 60-80字目安 `maxW:"68ch"`
- [ ] CTA押下エフェクト無し → `_active={{ transform:"translateY(1px)" }}`

#### 🟡 **IMPORTANT (強く推奨)**
- [ ] 全フォント偶数刻み → `15px/17px/19px` 混在
- [ ] グラデが数式的 → ノイズテクスチャ重ね
- [ ] 余白が上下対称 → `pt:"14px", pb:"22px"` など非対称
- [ ] ホバー=影だけ → `transform:"translateY(-1px)"` で微小上移動
- [ ] セクション見出し弱 → 字間/行間/下線で強調
- [ ] ボタン群が等間隔 → 主だけ+間隔

### 4. Pixi.js 固有チェック (該当する場合)
- [ ] `destroy({ children: true })` でクリーンアップ実装
- [ ] `prefers-reduced-motion` 対応 (アニメーション抑制)
- [ ] duration は偶数・5刻み回避 (例: `1.17`, `0.83`, `2.34`)
- [ ] easing は `cubic-bezier` でカスタム指定
- [ ] usePixiHudLayer + usePixiLayerLayout パターン使用

### 5. 出力形式

変更されたファイルごとに以下の形式でレポート:

```markdown
## デザイン監査レポート: [ファイル名]

### ✅ 合格項目
- 余白: `pt:"19px", pb:"22px"` で非対称性確保
- 角丸: 主ボタン `3px`、副ボタン `7px` で差別化
- アニメーション: `cubic-bezier(.2,1,.3,1)` でカスタム

### ⚠️ 改善推奨
- **行間**: 全段落 `1.5` で統一 → 見出し `1.2`/本文 `1.5`/注釈 `1.7` に差別化推奨
- **ホバー**: 影のみ → `translateY(-1px)` 追加で物理感向上

### ❌ 要修正
- **影**: 全カード `boxShadow:"md"` で統一 → 面積に応じて `sm/md/lg` に分割必須
- **余白**: `p={4}` (16px) の4倍数 → `p:"19px"` など非均一値に変更必須

### 💡 具体的な修正案
[該当箇所のコード例を提示]
```

### 6. 判断基準
- **崩す** = 目的ある微差 (読みやすさ・階層・手触り向上)
- **雑** = 理由なく変える/再現性なし/品質が揺れる

変更理由を**言語化できるか**が境界線。

### 7. スコープ制御
- デフォルト: 変更ファイルのみ対象
- `--full` フラグ: プロジェクト全体を監査
- `--file [path]`: 特定ファイルのみ監査

## 注意事項
- レポートは簡潔に (ファイルあたり5-10項目程度)
- ロジックファイル (lib/hooks, lib/firebase等) はスキップ
- 既存コードの破壊的変更は提案しない (新規・修正のみ)

## プロジェクト固有ルール
- **ダークモード固定** (ライトテーマ関連は全て拒否)
- **2クリック導線維持** (UX を崩す変更は拒否)
- **Pixi背景統一** (CSS背景への戻しは拒否)
- **prefers-reduced-motion 尊重** 必須

## 参照
- `万能デザイン指示書.md` (チェックリスト・Before/After)
- `CLAUDE.md` (プロジェクト方針)
- 既存実装例: `components/ui/AppButton.tsx`, `components/settings/SettingsModal.tsx`
