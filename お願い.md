次エージェント指示案（Pixi HUD 展開用）

ゴール共有

Battle Records モーダルで確立した Pixi HUD 背景化パターンを、他モーダル（パーティメンバー一覧／お題パネルなど）にも適用し、UI 一貫性を高める。
DOM の余計な背景・影を排除し、Pixi 側で背景パネルを描画する構成に統一する。
必須コンポーネント構成

usePixiHudLayer("unique-layer", { zIndex }) で専用レイヤーを取得。
zIndex は HTML オーバーレイより下、モーダル本体背景より上（例: Overlay=100, Pixi=105, Board DOM=120）。
usePixiLayerLayout を対象 DOM（モーダル本体の ref）に適用し、graphics.position.set(layout.x, layout.y)＋独自 drawXxxBackground(PIXI, graphics, layout) を呼び出す。
disabled 判定は !isOpen || !pixiContainer のみで、レイヤー確立直後からレイアウト監視できるようにする。
Pixi 背景描画ロジックは lib/pixi/... へ切り出し、背景デザイン（外周影/白枠/ゴールド/etc.）を関数化。Battle Records 版をテンプレに再利用する。
DOM レイヤリング & スタイル指針

モーダルの親 <Box> などは bg="transparent", boxShadow="none" を徹底。必要な半透明オーバーレイは Pixi で描くか、zIndex を Pixi より下にして配置。
コンテンツ要素（ヘッダー/テーブル/フッター）は position="relative"＋zIndex={20} 程度に固定し、Pixi キャンバス（pointerEvents: none）を邪魔しない。
Pixi 背景は graphics.clear() → drawXxxBackground(...) の順で再描画。Graphics は useEffect で生成し、アンマウント時に destroy({ children: true })。
共通ユーティリティ整備

背景描画: drawBattleRecordsBoard をベースに、ボード種別ごとに色・装飾をパラメータ化。
汎用ショートカットヒント: drawShortcutHintBackground のような薄型テンプレを追加済み。別モーダル用もこの形式で追加。
usePixiLayerLayout は既存のまま再利用。位置ズレ調査用ログは無効化済みなので、新規デバッグ時は logDebug に切り替える。
検証フロー

対象モーダルを開く→Pixi キャンバスが正しい位置に描画されるか確認。
アニメーション（GSAP/Transition）との競合がないか。特に開閉アニメ中でも背景が追従するか。
デバイス幅別に崩れがないか（useBreakpointValue を使っている箇所は幅に応じた再描画が走ることを確認）。
pointerEvents が壊れていないか（モーダル内のボタン操作が可能か）。
注意事項

Debug console.log は残さず、必要なら logDebug(scope, msg, data) を使用。
HINT_COMMON_STYLES.zIndex（現在 114）などグローバル値との競合に注意。新規レイヤー zIndex は既存ヒント・モーダルと衝突しない数値を割り当てる。
各モーダルごとに ref を React.useRef<HTMLDivElement | null> で管理し、Portal 配下の DOM と Pixi レイヤー双方が同一レイアウト基準を共有できるようにする。
以上を踏まえ、各モーダルで「DOM：構造とコンテンツ」「Pixi：背景描画」「zIndex の整列」をセットで進めること。