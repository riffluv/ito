<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITO - Professional Game Interface</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Professional Color System */
            --blue-50: #f0f9ff;
            --blue-100: #e0f2fe;
            --blue-500: #0ea5e9;
            --blue-600: #0284c7;
            --blue-700: #0369a1;
            
            --slate-50: #f8fafc;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-300: #cbd5e1;
            --slate-400: #94a3b8;
            --slate-500: #64748b;
            --slate-600: #475569;
            --slate-700: #334155;
            --slate-800: #1e293b;
            --slate-900: #0f172a;
            
            --green-50: #f0fdf4;
            --green-100: #dcfce7;
            --green-500: #22c55e;
            --green-600: #16a34a;
            
            --red-50: #fef2f2;
            --red-100: #fee2e2;
            --red-500: #ef4444;
            
            --amber-50: #fffbeb;
            --amber-100: #fef3c7;
            --amber-500: #f59e0b;
            
            --white: #ffffff;
            
            /* Typography */
            --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
            --font-jp: 'Noto Sans JP', var(--font-sans);
            
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            
            /* Radius */
            --radius-sm: 0.125rem;
            --radius: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            
            /* Transitions */
            --transition: all 0.15s ease-in-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-jp);
            background-color: var(--slate-50);
            color: var(--slate-900);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .game-layout {
            display: grid;
            grid-template-areas:
                "header header header"
                "sidebar main-area host-controls"
                "hand hand hand";
            grid-template-columns: 280px 1fr 320px;
            grid-template-rows: auto 1fr 180px;
            height: 100vh;
            gap: 1px;
        }

        .game-layout.chat-mode {
            grid-template-areas:
                "header header header"
                "sidebar main-area chat"
                "hand hand hand";
        }

        /* Header */
        .header {
            grid-area: header;
            background: var(--white);
            border-bottom: 1px solid var(--slate-200);
            padding: var(--space-4) var(--space-6);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .game-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--slate-900);
            font-family: var(--font-sans);
        }

        .room-info {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .room-code {
            background: var(--slate-100);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-family: 'Monaco', monospace;
            font-size: 0.875rem;
            color: var(--slate-700);
            border: 1px solid var(--slate-200);
        }

        .phase-indicator {
            background: var(--blue-500);
            color: var(--white);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Sidebar */
        .sidebar {
            grid-area: sidebar;
            background: var(--white);
            border-right: 1px solid var(--slate-200);
            overflow-y: auto;
        }

        .sidebar-header {
            padding: var(--space-6) var(--space-6) var(--space-4);
            border-bottom: 1px solid var(--slate-200);
        }

        .sidebar-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--slate-900);
            margin-bottom: var(--space-2);
        }

        .player-count {
            font-size: 0.875rem;
            color: var(--slate-600);
        }

        .player-list {
            padding: var(--space-4) var(--space-6);
        }

        .player-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: var(--space-3) 0;
            border-bottom: 1px solid var(--slate-100);
        }

        .player-item:last-child {
            border-bottom: none;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: 600;
            color: var(--slate-900);
            margin-bottom: var(--space-1);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .player-badge {
            background: var(--blue-100);
            color: var(--blue-700);
            font-size: 0.75rem;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-weight: 500;
        }

        .player-badge.host {
            background: var(--amber-100);
            color: var(--amber-500);
        }

        .player-badge.you {
            background: var(--green-100);
            color: var(--green-600);
        }

        .player-clue {
            font-size: 0.875rem;
            color: var(--slate-600);
            font-style: italic;
        }

        .player-clue.pending {
            color: var(--slate-400);
        }

        .player-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--green-500);
            margin-top: var(--space-1);
        }

        .player-status.pending {
            background: var(--slate-300);
        }

        .player-status.active {
            background: var(--blue-500);
        }

        /* Main Area */
        .main-area {
            grid-area: main-area;
            background: var(--white);
            padding: var(--space-8);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .theme-section {
            text-align: center;
            margin-bottom: var(--space-8);
        }

        .theme-card {
            background: var(--slate-900);
            color: var(--white);
            padding: var(--space-8);
            border-radius: var(--radius-2xl);
            box-shadow: var(--shadow-lg);
            margin-bottom: var(--space-4);
        }

        .theme-label {
            font-size: 0.875rem;
            opacity: 0.8;
            margin-bottom: var(--space-2);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .theme-text {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.1;
        }

        .instruction-text {
            color: var(--slate-600);
            max-width: 480px;
            margin: 0 auto;
        }

        .game-board {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .board-header {
            font-weight: 600;
            color: var(--slate-700);
            margin-bottom: var(--space-6);
        }

        .card-area {
            background: var(--slate-50);
            border: 2px dashed var(--slate-300);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            flex-wrap: wrap;
            margin-bottom: var(--space-6);
        }

        .card-slot {
            width: 80px;
            height: 112px;
            border: 2px dashed var(--slate-300);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--white);
            transition: var(--transition);
            position: relative;
        }

        .card-slot.drop-target {
            border-color: var(--blue-500);
            background: var(--blue-50);
        }

        .start-marker {
            color: var(--slate-400);
            font-weight: 700;
            font-size: 1.5rem;
        }

        .player-card {
            width: 76px;
            height: 108px;
            background: var(--white);
            border: 2px solid var(--slate-300);
            border-radius: var(--radius-lg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: grab;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .player-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--blue-500);
        }

        .player-card:active {
            cursor: grabbing;
        }

        .card-name {
            font-size: 0.75rem;
            color: var(--slate-500);
            margin-bottom: var(--space-1);
            font-weight: 500;
        }

        .card-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--slate-400);
        }

        .progress-section {
            background: var(--slate-50);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
        }

        .progress-text {
            color: var(--slate-600);
            margin-bottom: var(--space-3);
        }

        .status-badges {
            display: flex;
            gap: var(--space-2);
            justify-content: center;
            flex-wrap: wrap;
        }

        .status-badge {
            background: var(--slate-100);
            color: var(--slate-600);
            font-size: 0.75rem;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius);
            font-weight: 500;
        }

        .status-badge.ready {
            background: var(--green-100);
            color: var(--green-600);
        }

        .status-badge.waiting {
            background: var(--amber-100);
            color: var(--amber-500);
        }

        /* Host Controls Panel */
        .host-controls {
            grid-area: host-controls;
            background: var(--white);
            border-left: 1px solid var(--slate-200);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .host-header {
            padding: var(--space-6) var(--space-6) var(--space-4);
            border-bottom: 1px solid var(--slate-200);
            background: var(--amber-50);
        }

        .host-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--slate-900);
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .host-badge {
            background: var(--amber-500);
            color: var(--white);
            font-size: 0.75rem;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-weight: 600;
        }

        .host-status {
            font-size: 0.875rem;
            color: var(--slate-600);
        }

        .host-controls-body {
            padding: var(--space-4) var(--space-6);
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
        }

        .control-section {
            border-bottom: 1px solid var(--slate-100);
            padding-bottom: var(--space-4);
        }

        .control-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--slate-700);
            margin-bottom: var(--space-3);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .control-group.horizontal {
            flex-direction: row;
            gap: var(--space-2);
        }

        .host-btn {
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            text-align: center;
            font-size: 0.875rem;
        }

        .host-btn-primary {
            background: var(--blue-500);
            color: var(--white);
        }

        .host-btn-primary:hover {
            background: var(--blue-600);
        }

        .host-btn-primary:disabled {
            background: var(--slate-300);
            color: var(--slate-500);
            cursor: not-allowed;
        }

        .host-btn-secondary {
            background: var(--slate-100);
            color: var(--slate-700);
            border-color: var(--slate-200);
        }

        .host-btn-secondary:hover {
            background: var(--slate-200);
        }

        .host-btn-danger {
            background: var(--red-50);
            color: var(--red-600);
            border-color: var(--red-200);
        }

        .host-btn-danger:hover {
            background: var(--red-100);
        }

        .theme-selector {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .theme-option {
            padding: var(--space-3);
            border: 2px solid var(--slate-200);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
            text-align: left;
        }

        .theme-option:hover {
            border-color: var(--blue-300);
            background: var(--blue-50);
        }

        .theme-option.selected {
            border-color: var(--blue-500);
            background: var(--blue-50);
        }

        .theme-option-name {
            font-weight: 600;
            color: var(--slate-900);
            margin-bottom: var(--space-1);
        }

        .theme-option-desc {
            font-size: 0.75rem;
            color: var(--slate-500);
        }

        .game-state-info {
            background: var(--slate-50);
            border-radius: var(--radius-lg);
            padding: var(--space-3);
            margin-bottom: var(--space-4);
        }

        .state-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            margin-bottom: var(--space-1);
        }

        .state-item:last-child {
            margin-bottom: 0;
        }

        .state-label {
            color: var(--slate-600);
        }

        .state-value {
            font-weight: 600;
            color: var(--slate-900);
        }

        .mode-toggle {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .toggle-btn {
            background: var(--slate-200);
            color: var(--slate-600);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .toggle-btn.active {
            background: var(--blue-500);
            color: var(--white);
        }
        /* Chat Panel */
        .chat-panel {
            grid-area: chat;
            background: var(--white);
            border-left: 1px solid var(--slate-200);
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: var(--space-6) var(--space-6) var(--space-4);
            border-bottom: 1px solid var(--slate-200);
        }

        .chat-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--slate-900);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-4) var(--space-6);
            gap: var(--space-3);
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 90%;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
        }

        .message.system {
            background: var(--slate-100);
            color: var(--slate-600);
            text-align: center;
            max-width: 100%;
            font-style: italic;
        }

        .message.other {
            background: var(--slate-100);
            color: var(--slate-900);
            align-self: flex-start;
        }

        .message.own {
            background: var(--blue-500);
            color: var(--white);
            align-self: flex-end;
        }

        .message-header {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: var(--space-1);
        }

        .chat-input-area {
            padding: var(--space-4) var(--space-6);
            border-top: 1px solid var(--slate-200);
            display: flex;
            gap: var(--space-2);
        }

        .chat-input {
            flex: 1;
            padding: var(--space-3);
            border: 1px solid var(--slate-300);
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
            resize: none;
            max-height: 80px;
            font-family: inherit;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--blue-500);
            box-shadow: 0 0 0 3px var(--blue-50);
        }

        .chat-send {
            background: var(--blue-500);
            color: var(--white);
            border: none;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-lg);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .chat-send:hover {
            background: var(--blue-600);
        }

        /* Hand Panel */
        .hand-panel {
            grid-area: hand;
            background: var(--white);
            border-top: 1px solid var(--slate-200);
            padding: var(--space-6);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-8);
        }

        .my-card-section {
            display: flex;
            align-items: center;
            gap: var(--space-6);
        }

        .my-card {
            width: 120px;
            height: 168px;
            background: var(--slate-900);
            color: var(--white);
            border-radius: var(--radius-xl);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
        }

        .my-card-label {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: var(--space-2);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .my-card-number {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1;
        }

        .card-info {
            text-align: left;
        }

        .card-info-label {
            font-size: 0.875rem;
            color: var(--slate-500);
            margin-bottom: var(--space-1);
        }

        .card-info-value {
            font-weight: 600;
            color: var(--slate-900);
        }

        .clue-section {
            flex: 1;
            max-width: 400px;
        }

        .clue-label {
            font-weight: 600;
            color: var(--slate-900);
            margin-bottom: var(--space-2);
            display: block;
        }

        .clue-input {
            width: 100%;
            padding: var(--space-4);
            border: 2px solid var(--slate-300);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 500;
            font-family: inherit;
            background: var(--slate-50);
            transition: var(--transition);
        }

        .clue-input:focus {
            outline: none;
            border-color: var(--blue-500);
            box-shadow: 0 0 0 3px var(--blue-50);
            background: var(--white);
        }

        .clue-help {
            font-size: 0.75rem;
            color: var(--slate-500);
            margin-top: var(--space-1);
        }

        .action-buttons {
            display: flex;
            gap: var(--space-3);
        }

        .btn {
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .btn-primary {
            background: var(--blue-500);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--blue-600);
        }

        .btn-secondary {
            background: var(--slate-200);
            color: var(--slate-700);
        }

        .btn-secondary:hover {
            background: var(--slate-300);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .game-layout {
                grid-template-areas:
                    "header"
                    "host-controls"
                    "main-area"
                    "sidebar"
                    "hand";
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr auto auto;
            }

            .chat-panel {
                display: none;
            }

            .host-controls {
                max-height: 200px;
                overflow-y: auto;
            }

            .host-controls-body {
                padding: var(--space-3) var(--space-4);
                gap: var(--space-4);
            }

            .control-section {
                padding-bottom: var(--space-3);
            }

            .control-group.horizontal {
                flex-wrap: wrap;
            }

            .hand-panel {
                flex-direction: column;
                gap: var(--space-6);
            }

            .my-card-section {
                width: 100%;
                justify-content: center;
            }

            .clue-section {
                width: 100%;
                max-width: none;
            }

            .action-buttons {
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: var(--space-3) var(--space-4);
            }

            .room-info {
                flex-direction: column;
                gap: var(--space-2);
                align-items: flex-end;
            }

            .main-area {
                padding: var(--space-6) var(--space-4);
            }

            .theme-text {
                font-size: 1.875rem;
            }

            .my-card {
                width: 100px;
                height: 140px;
            }

            .my-card-number {
                font-size: 2.5rem;
            }

            .card-area {
                padding: var(--space-4);
                min-height: 160px;
            }

            .player-card {
                width: 64px;
                height: 90px;
            }

            .card-slot {
                width: 68px;
                height: 94px;
            }
        }

        /* Drag & Drop States */
        .dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .drop-zone-active {
            background: var(--blue-50);
            border-color: var(--blue-500);
        }
    </style>
</head>
<body>
    <div class="game-layout">
        <!-- Header -->
        <header class="header">
            <div class="game-title">ITO</div>
            <div class="room-info">
                <div class="room-code">ABC123</div>
                <div class="phase-indicator">ヒント入力フェーズ</div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">プレイヤー</div>
                <div class="player-count">5/6人</div>
            </div>
            
            <div class="player-list">
                <div class="player-item">
                    <div class="player-info">
                        <div class="player-name">
                            たろう
                            <span class="player-badge host">ホスト</span>
                        </div>
                        <div class="player-clue">ヒント: お米のおいしさ</div>
                    </div>
                    <div class="player-status"></div>
                </div>

                <div class="player-item">
                    <div class="player-info">
                        <div class="player-name">
                            あなた
                            <span class="player-badge you">自分</span>
                        </div>
                        <div class="player-clue pending">ヒント入力中...</div>
                    </div>
                    <div class="player-status active"></div>
                </div>

                <div class="player-item">
                    <div class="player-info">
                        <div class="player-name">はなこ</div>
                        <div class="player-clue">ヒント: キムチの辛さ</div>
                    </div>
                    <div class="player-status"></div>
                </div>

                <div class="player-item">
                    <div class="player-info">
                        <div class="player-name">じろう</div>
                        <div class="player-clue">ヒント: 焚き火の温度</div>
                    </div>
                    <div class="player-status"></div>
                </div>

                <div class="player-item">
                    <div class="player-info">
                        <div class="player-name">さくら</div>
                        <div class="player-clue pending">ヒント待ち</div>
                    </div>
                    <div class="player-status pending"></div>
                </div>
            </div>
        </aside>

        <!-- Main Area -->
        <main class="main-area">
            <section class="theme-section">
                <div class="theme-card">
                    <div class="theme-label">今回のお題</div>
                    <div class="theme-text">辛さ・熱さ</div>
                </div>
                <div class="instruction-text">
                    あなたの数字を「辛さ・熱さ」で表現してください。<br>
                    <strong>数字そのものは絶対に言わないように！</strong>
                </div>
            </section>

            <section class="game-board">
                <div class="board-header">
                    カードを小さい順（左）から大きい順（右）に並べよう！
                </div>
                
                <div class="card-area">
                    <div class="card-slot">
                        <div class="start-marker">0</div>
                    </div>
                    
                    <div class="card-slot drop-target"></div>
                    
                    <div class="player-card" draggable="true">
                        <div class="card-name">たろう</div>
                        <div class="card-number">?</div>
                    </div>
                    
                    <div class="card-slot drop-target"></div>
                    
                    <div class="player-card" draggable="true">
                        <div class="card-name">はなこ</div>
                        <div class="card-number">?</div>
                    </div>
                    
                    <div class="card-slot"></div>
                    
                    <div class="player-card" draggable="true">
                        <div class="card-name">じろう</div>
                        <div class="card-number">?</div>
                    </div>
                </div>
                
                <div class="progress-section">
                    <div class="progress-text">
                        準備状況: <strong>3/5人</strong> がヒントを入力しました
                    </div>
                    <div class="status-badges">
                        <span class="status-badge ready">たろう</span>
                        <span class="status-badge ready">はなこ</span>
                        <span class="status-badge ready">じろう</span>
                        <span class="status-badge waiting">あなた</span>
                        <span class="status-badge waiting">さくら</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Chat Panel -->
        <aside class="chat-panel">
            <div class="chat-header">
                <div class="chat-title">チャット</div>
            </div>
            
            <div class="chat-messages">
                <div class="message other">
                    <div class="message-header">たろう • 15:30</div>
                    みんな、頑張ろう！
                </div>
                
                <div class="message other">
                    <div class="message-header">はなこ • 15:32</div>
                    キムチって結構辛いよね？
                </div>
                
                <div class="message other">
                    <div class="message-header">じろう • 15:34</div>
                    焚き火は熱いけど、どのくらいかな...
                </div>
            </div>
            
            <div class="chat-input-area">
                <textarea class="chat-input" placeholder="メッセージを入力..." rows="1"></textarea>
                <button class="chat-send">送信</button>
            </div>
        </aside>

        <!-- Hand Panel -->
        <section class="hand-panel">
            <div class="my-card-section">
                <div class="my-card">
                    <div class="my-card-label">あなたの数字</div>
                    <div class="my-card-number">73</div>
                </div>
                
                <div class="card-info">
                    <div class="card-info-label">カードの位置予想</div>
                    <div class="card-info-value">中程度～高め</div>
                </div>
            </div>

            <div class="clue-section">
                <label class="clue-label" for="clueInput">
                    あなたのヒント（「辛さ・熱さ」で表現）
                </label>
                <input 
                    class="clue-input" 
                    type="text" 
                    id="clueInput"
                    placeholder="例: お風呂のちょうどいい温度..."
                    value="夏の車のハンドルくらい"
                    maxlength="50">
                <div class="clue-help">12 / 50文字</div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-secondary">クリア</button>
                <button class="btn btn-primary">ヒント確定</button>
            </div>
        </section>
    </div>

    <script>
        // Basic drag and drop functionality
        let draggedElement = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
            initializeChat();
            initializeClueInput();
        });

        function initializeDragAndDrop() {
            const cards = document.querySelectorAll('.player-card');
            const slots = document.querySelectorAll('.card-slot');

            cards.forEach(card => {
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
            });

            slots.forEach(slot => {
                slot.addEventListener('dragover', handleDragOver);
                slot.addEventListener('drop', handleDrop);
                slot.addEventListener('dragenter', handleDragEnter);
                slot.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            document.querySelectorAll('.card-slot').forEach(slot => {
                slot.classList.remove('drop-zone-active');
            });
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDragEnter(e) {
            e.preventDefault();
            if (e.target.classList.contains('card-slot')) {
                e.target.classList.add('drop-zone-active');
            }
        }

        function handleDragLeave(e) {
            if (e.target.classList.contains('card-slot')) {
                e.target.classList.remove('drop-zone-active');
            }
        }

        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('drop-zone-active');
            
            if (draggedElement && e.target.classList.contains('card-slot')) {
                e.target.appendChild(draggedElement);
            }
        }

        function initializeChat() {
            const chatInput = document.querySelector('.chat-input');
            const chatSend = document.querySelector('.chat-send');
            const chatMessages = document.querySelector('.chat-messages');

            function sendMessage() {
                const message = chatInput.value.trim();
                if (message) {
                    const time = new Date().toLocaleTimeString('ja-JP', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                    
                    const messageEl = document.createElement('div');
                    messageEl.className = 'message own';
                    messageEl.innerHTML = `
                        <div class="message-header">あなた • ${time}</div>
                        ${escapeHtml(message)}
                    `;
                    
                    chatMessages.appendChild(messageEl);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    chatInput.value = '';
                }
            }

            chatSend.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Auto-resize textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 80) + 'px';
            });
        }

        function initializeClueInput() {
            const clueInput = document.getElementById('clueInput');
            const clueHelp = document.querySelector('.clue-help');
            const submitBtn = document.querySelector('.btn-primary');
            const clearBtn = document.querySelector('.btn-secondary');

            function updateCharCount() {
                const count = clueInput.value.length;
                const max = 50;
                clueHelp.textContent = `${count} / ${max}文字`;
            }

            clueInput.addEventListener('input', updateCharCount);

            submitBtn.addEventListener('click', function() {
                const clue = clueInput.value.trim();
                if (clue) {
                    this.textContent = '送信完了';
                    this.disabled = true;
                    setTimeout(() => {
                        this.textContent = '変更する';
                        this.disabled = false;
                    }, 1500);
                }
            });

            clearBtn.addEventListener('click', function() {
                clueInput.value = '';
                clueInput.focus();
                updateCharCount();
            });

            updateCharCount();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>
</html>