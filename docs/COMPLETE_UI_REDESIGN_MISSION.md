# 🎯 codexプロジェクト 完全UI設計見直し指示書

## 📋 **ミッション概要**

このプロジェクトには**体系的なUI設計問題**が複数発見されています。単発の修正ではなく、**根本的なアーキテクチャレベルでの見直し**が必要です。

あなたの使命は、このオンライン協力ゲーム「ito」を**モダンで保守性の高い、真にユーザーフレンドリーなアプリケーション**に進化させることです。

## 🔍 **調査フェーズ: 問題発見**

### 自発的調査のガイドライン

**以下の観点で、コードベース全体を詳細に調査してください：**

#### 1. **設計の一貫性**

- 同じ目的のコンポーネントが異なる方法で実装されていないか？
- サイズ、スペーシング、色彩の定義が統一されているか？
- 命名規則やディレクトリ構造に混乱はないか？

#### 2. **ユーザー体験の完整性**

- 全ての画面サイズで本当に使用可能か？
- 重要な機能へのアクセスが遮断されている端末はないか？
- 操作フローに不自然な断絶や矛盾はないか？

#### 3. **技術的負債**

- 廃止予定のシステムが混在使用されていないか？
- 同じ機能が重複実装されていないか？
- ハックや回避策で問題を隠蔽している箇所はないか？

#### 4. **保守性とスケーラビリティ**

- 新機能追加時に既存コードの大規模修正が必要になりそうな構造はないか？
- コンポーネントの責任が曖昧で、変更影響範囲の予測が困難な箇所はないか？
- 型安全性やテスタビリティに問題はないか？

#### 5. **パフォーマンスと品質**

- 不要な再レンダリング、メモリリーク、バンドルサイズ肥大化の要因はないか？
- アクセシビリティやSEO上の問題はないか？
- 実際のユーザー環境での動作に影響する要因はないか？

## 🛠 **解決フェーズ: システム設計**

### 発見した問題に対して、以下の原則で解決策を立案してください：

#### **設計原則**

1. **単一責任の原則**
   - 各コンポーネントは1つの明確な責任を持つ
   - 巨大なコンポーネントは機能別に分割する

2. **一貫性の原則**
   - 同じ目的は同じ方法で実装する
   - 統一されたデザインシステムを確立する

3. **段階的移行の原則**
   - 破壊的変更を最小化する
   - 既存機能を維持しながら改善する

4. **未来対応の原則**
   - 新機能追加が容易な拡張可能な設計
   - 技術進歩に適応できる柔軟な構造

#### **技術選択指針**

- **Chakra UI v3**: 最新機能を活用し、従来システムからの完全移行
- **TypeScript**: 型安全性を最大限活用した堅牢な実装
- **Next.js 14**: App Routerの特性を活かしたモダンな構造
- **dnd-kit + framer-motion**: ゲーム体験に最適化されたインタラクション

## 📝 **実装フェーズ: 段階的改善**

### 優先度の判定基準

**あなたが発見した問題を以下の基準で優先度付けしてください：**

#### **緊急度 (Impact)**

- **Critical**: ユーザーが基本機能を使用できない
- **High**: 特定の環境・状況で重大な支障がある
- **Medium**: 使用可能だが体験が大きく損なわれる
- **Low**: 改善により体験が向上する

#### **修正難易度 (Effort)**

- **Easy**: 単一ファイルの局所的変更
- **Medium**: 複数ファイルの連携修正
- **Hard**: アーキテクチャレベルの設計変更
- **Epic**: プロジェクト全体に影響する大規模リファクタリング

### 提案フォーマット

各問題に対して以下の形式で解決案を提示してください：

```markdown
## 問題: [問題の簡潔な説明]

**影響範囲**: [ユーザー/開発者への具体的影響]
**根本原因**: [技術的な原因の分析]
**優先度**: [緊急度/修正難易度]

### 解決案

1. **短期対応**: [すぐに実行可能な改善]
2. **中期対応**: [設計改善を含む対応]
3. **長期対応**: [理想的な最終形態]

### 実装詳細

- **修正対象ファイル**: [具体的なファイルパス]
- **影響範囲**: [変更が及ぶ他のコンポーネント]
- **テスト観点**: [確認すべき動作]
- **リスク**: [実装時の注意点]
```

## 🎮 **コンテキスト: プロジェクトの特性**

### **このプロジェクトの独特な要件**

1. **リアルタイム協力ゲーム**
   - 複数ユーザーの同期状態管理
   - レスポンス性能への高い要求
   - 直感的で迷いのないUI

2. **マルチデバイス対応**
   - PC/モバイル両方での快適な操作性
   - 画面サイズによる機能制限の最小化

3. **Firebase連携**
   - オフライン対応と状態復旧
   - リアルタイム更新の適切な反映

4. **拡張性**
   - ゲームルールの追加
   - 新機能の容易な統合

### **品質基準**

- **パフォーマンス**: 初期描画 < 1秒、操作反応 < 100ms
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **ブラウザ対応**: モダンブラウザ (IE除く)
- **コード品質**: TypeScript strict、テストカバレッジ80%以上

## 🚀 **期待する成果**

### **最終的に実現されるべき状態**

1. **開発者体験**
   - 新機能追加が予測可能で簡単
   - バグの局所化と修正が容易
   - コードレビューが効率的

2. **ユーザー体験**
   - すべての画面サイズで完全に機能する
   - 直感的で迷いのない操作感
   - 高速で安定した動作

3. **保守性**
   - 技術スタックの更新が容易
   - セキュリティ対応が迅速
   - パフォーマンス最適化が効果的

## 💡 **調査・実装のヒント**

### **効果的な調査方法**

1. **コードパターン分析**: 同じパターンの実装が何通りあるか調査
2. **依存関係追跡**: 変更時の影響範囲を可視化
3. **ユーザーフロー分析**: 実際の操作手順を画面サイズ別に検証
4. **パフォーマンス分析**: ボトルネックとなっている要因を特定

### **実装時の成功要因**

1. **段階的実装**: 機能を停止させずに改善を進める
2. **自動テスト**: 回帰を防ぐテストケースの充実
3. **ドキュメント化**: 設計判断の根拠を記録
4. **継続的検証**: 改善効果の定量的測定

---

## 🎯 **最終メッセージ**

このプロジェクトを**次世代のオンラインゲーム体験**にふさわしい品質に引き上げてください。

単なる問題修正ではなく、**ユーザーに愛され、開発者に信頼される、真に価値あるアプリケーション**の実現を目指してください。

あなたの深い洞察力と技術力により、このプロジェクトが**新しいスタンダード**となることを期待しています。

**Good luck, and build something amazing! 🚀**

---

**作成日**: 2025-08-26  
**対象**:  claude code
**目的**: 完全UI設計見直しプロジェクト
