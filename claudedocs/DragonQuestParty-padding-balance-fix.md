# DragonQuestParty パディングバランス修正指示書

## 🚨 現在の問題

### 視覚的な問題
- **上の隙間が狭い**：コンテンツが上に詰まっている
- **下の隙間が広い**：ボックス下部にスカスカの空白
- **全体バランス悪い**：72px高さのボックス内でコンテンツが偏っている

### 現在の設定状況
```typescript
// File: components/ui/DragonQuestParty.tsx
// 外側ボックス
h="72px"
px="12px"
py="8px"    // ← この上下8pxが均等すぎる

// 内側レイアウト
alignItems="center"  // ← 最近変更したが効果なし
gap={2}
```

## 🔍 問題の根本原因（推測）

### 1. パディング配分問題
```
現在: 上8px + コンテンツ + 下8px = 72px
理想: 上6px + コンテンツ + 下10px = 72px（または別配分）
```

### 2. 内部コンテンツの高さ配分
- アバター: 44px（固定）
- テキスト行: 18px + 14px + 14px = 46px（合計）
- 実際の必要高さ vs 利用可能高さの不一致

### 3. フレックスボックス計算問題
- `alignItems="center"`が効いていない
- 内部の`flexDirection="column"`との競合
- `gap`設定による高さ計算の影響

## 🎯 修正方針

### Option A: パディング手動調整
```typescript
// 均等パディングをやめる
py="8px"
↓
pt="6px"   // 上を狭く
pb="10px"  // 下を広く
```

### Option B: 内部レイアウト見直し
```typescript
// 内部コンテンツの配置を調整
<Box h="56px" display="flex" justifyContent="center" alignItems="center">
  // 計算: 72px - 16px(上下padding) = 56px
</Box>
```

### Option C: CSS Grid使用
```typescript
// より正確な配置制御
display="grid"
gridTemplateRows="1fr auto 1fr"  // 上余白 コンテンツ 下余白
```

## 🔧 実行手順

### Step 1: 現状の正確な測定
1. ブラウザDevToolsで実際の寸法を測定
2. 上下の空白ピクセル数を正確に記録
3. コンテンツ部分の実際の高さを確認

### Step 2: 根本原因特定
1. `py="8px"`が本当に上下均等に効いているか確認
2. 内部フレックスボックスの計算結果をチェック
3. `gap={2}`（8px）が高さ計算に与える影響を調査

### Step 3: 修正実装
1. **簡単な方法**: `pt="6px" pb="10px"`で調整
2. **確実な方法**: 内部レイアウトを完全に再設計
3. **高度な方法**: CSS Gridで精密制御

### Step 4: 検証
- [ ] 上下の隙間が視覚的にバランス良い
- [ ] アバターが適切な位置にある
- [ ] テキスト情報が中央寄りに配置
- [ ] レイアウト崩れが発生しない
- [ ] GSAPアニメーションに影響なし

## 📄 対象ファイル

**メインファイル**: `components/ui/DragonQuestParty.tsx`
- 修正箇所: line 343-344 (padding設定)
- 関連箇所: line 358-361 (内部flex設定)
- 内部コンテンツ: line 363-500 (アバター・テキスト・ゲージ部分)

## ⚠️ 注意事項

1. **レイアウト安定性を維持**
   - 既存の`h="72px"`固定は変更しない
   - GSAPアニメーション部分に影響しない
   - 決定ボタン押下時の崩れを再発させない

2. **視覚的品質を向上**
   - SSS級RPG感を維持
   - 自然なバランス感を実現
   - ボックス内の有効活用感

## 🏆 成功条件

**視覚的に上下の隙間がバランス良く、コンテンツがボックス内で自然に配置された状態**

現在は上詰まり・下スカスカで不自然。理想は全体が中央寄りで安定感のある配置。

---

**重要**: 単純な`alignItems`変更では解決しない深い問題。パディング配分またはレイアウト構造の根本的見直しが必要。